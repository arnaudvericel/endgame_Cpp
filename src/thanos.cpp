#ifdef THANOS // only compile this part if thanos has been requested by user

#include "../include/thanos.h"
#include "unistd.h"
#include <fstream>
#include <cstdlib>

/*************************************/
/************** PUBLIC ***************/
/*************************************/

Thanos::Thanos(): filename("thanos_quotes.in") { read_quotesfile(); }

void Thanos::talks_to_gamora() {
    cout << endl;
    cout << "Is it done?" << endl;
    sleep(1);
    cout << "Y..." << flush;
    sleep(1);
    cout << "Yes" << endl;
    sleep(1);
    cout << "What did it cost?" << endl;
    sleep(2);
    cout << "Everything..." << endl;
    sleep(1);
}
void Thanos::init_punchline() { cout << "\nFine, I'll do it myself.\n" << endl; }

void Thanos::regular_ending() {
    srand(time(NULL)); // init random seed

    int index_choice = rand() % (punchlines.size()-1); // generate index between 0 and length of punchlines vector

    cout << "\n'" << punchlines[index_choice] << "'\n" << endl;
}

void Thanos::balanced_ending() { cout << "\nLooks pretty isn't it? Perfectly balanced, as all things should be.\n" << endl; }

void Thanos::print_artwork() {

cout << endl;
cout << "**************/**,,,,,,,,,,,,,**//////*,,,,,,**,**,,,,,,,,,,,,*,,,,,,,,,,,,,,,,,,,,,,,,,,"<< endl;
cout << "************(*,,,,,,,,,,,,,,,,,,,,,,*,,.,*,**,,,*,,,,,,,,,,*,,,*,,,,,,,,,,,,,,,,,,,,,,,,,"<< endl;
cout << "**********//,,,,,,,,,,,,,.,,,,,,,,,..,....*,,,,*,,,,,,,,,,,,,,,,**,,,,,,,,,,,,,,,,,,,,,,,"<< endl;
cout << "*********#***,**,,,,,,,,,,,.,.,,,***,,***,*,,,.,,,,,,,,,,,,,,,,****,,,,,,,,,,,,,,,,,,,,,,"<< endl;
cout << "********/********,,,,,,.....,,,,,,,,,,,,.,,,,,*,,,,*,.,..,,,,,,****/,,,,,,,,,,,,,,,,,,,,,"<< endl;
cout << "*******/**/******,,,,..,,,,,,,,,,,,,,*****,,.,,,,,**..,,.,,,.,*,,***/,,,,,,,,,,,,,,,,,,,,"<< endl;
cout << "******/**/******,,,,,,,,,,,,,,,,,,,,,,.,,*,,,,,,,,**.,,.,.,,,,*,,,****,,,,,,,,,,,,,,,,,,,"<< endl;
cout << "*****#**********,,,,,,,,,,,,,.......,,,,,,,.,,,,,,,*...,...,,,,,,,,****,,,,,,,,,,,,,,,,,,"<< endl;
cout << "*****#***********,,,,,*,,,.....................,,,,,,,.......,,,,,,,**/*,,,,,,,,,,,,,,,,,"<< endl;
cout << "****/#********,,,,,,,**,,..,.......,...............,,,,,.....,,,,,,,,*/**,,,,,,,,,,,,,,,,"<< endl;
cout << "****##*****,***,,,,,,,*,,..,...,,,,.....,............,,,,.,**,,,,,,,,/(**,***,,,,,,,,,,,,"<< endl;
cout << "****#((********,,,.,,,,,,,,,,,,........,.,,,...........,*/*,,,,,,,,,,,.,..,...*,,,,,,,,,,"<< endl;
cout << "****##**********,,,,*,,............,................,,***,,,,,,,,,,,,,,,,.......,,,,,,,,,"<< endl;
cout << "****(%****/***,**,,,**,.................,...........,*,,...,,,,,,,,,**,..,..,,*.,,,,,,,,,"<< endl;
cout << "*****%//****,,,,,,,,**,,................,...........,.......,,,,,*****,*,.,....,,*,,,,,,,"<< endl;
cout << "*****##**,,,,.......,*,,.....................................,,,,**,,*,,,.,,....,,,,,,,,,"<< endl;
cout << "*****%**,,,,,,.......,,.........................,...........,,,**,,,,,***.......,.*,,,,,,"<< endl;
cout << "*****(*****,,,.......,,..........................,,........,,****,,,,,***,,,,*,,*,,,,,,,,"<< endl;
cout << "******(*,**,,.......,**,,,.................................,,,*,,,,,,,****,,,,**.*,,,,,,,"<< endl;
cout << "*******(**,,**,....*/*,,,,,.............................,,,,,,,,,,,,,,,****.,,*,,/,,,,,,,"<< endl;
cout << "*******#**,****,,****,,,,,......,.......................,,,,,,,,,,,,,,,,,**...,*/*,,,,,,,"<< endl;
cout << "*******(%*******/***...,,,.,............................,*,,,.,,,,,,,,,,,,*,...,*/,,,,,,,"<< endl;
cout << "*******(*******,/*,.*..,*,.............................,,,,,,.,,,,,,,,,,,,,*,.,***/,,,,,,"<< endl;
cout << "******(#********,,..***,,..,,..........................,,,,,,,,,,,.,,,,,,,**/..,***/,,,,*"<< endl;
cout << "******/#********,..,**,*,...,*...........................,,,,,,,,,,,,,,,,****,..****/*,*,"<< endl;
cout << "/******#*,******..,,****,...,*,............................,..,,,,,,,,,,,,****..,***/(*,,"<< endl;
cout << "********(*****,,..,,,***,..,*..............................,,,..,,,,,,,,,,,***,..,****(,,"<< endl;
cout << "****//*//((***,,..,,***,,,,.................................,,*...,,,,,,,,,,***..,,,**/(,"<< endl;
cout << "///*/*///*//,*,,.,,,,*,,,,,..................................,,*,,.,,,..,,,,,,,,...**/*/("<< endl;
cout << "///////////(***,.,*,*,.,...,,*,,...,..........................,*,,,,,.,,,,,,,,,,....,,,,("<< endl;
cout << "///////////*(*,,.*,**,.,***,,.,,...............................,*.,*,,,,,,,,,.,.........."<< endl;
cout << "///////////**(*,.*,,,,*/**.,...................................,*,,,,,*,*,,,............."<< endl;
cout << "//////////***(*,,*,,.**,.,.,,...................................,*,,,,***,..............."<< endl;
cout << "/////////****//,.*,.**,,....,...................................,*,,,*,,................."<< endl;
cout << "/////////*****/*,,,,,,,.,...,,..,.,,............................,,.,,...................."<< endl;
cout << "///////////***(*,,,,,,,,.,,,,,,..,,,..............................,......................"<< endl;
cout << "///////////***/(,,*,,,,,,,,,,,,..,,,,...................................................."<< endl;
cout << "/////////////*/(*,,,,,,,*,,,.,,,..,,....................................................."<< endl;
cout << "/////////////////,,,,,,,,,,,.,,...,,....................................................."<< endl;
cout << "//////////////***/,,,,,,,,,........,....................................................."<< endl;
cout << "//////////////*****,,,,,,,,,...,.....,..................................................."<< endl;
cout << "//////////////***..*,,,.,,.,....,....,,.................................................."<< endl;
cout << "///////////////*...(,,,.,,.,,...,,....,.................................................."<< endl;
cout << "////////////////,...,.,.,,..,....,,......................................................"<< endl;
cout << "////////////////*...*,,,.,,.,,....,......................................................"<< endl;
cout << "/////////////////,...,,,,.,,............................................................."<< endl;
cout << "/////////////////*.....,,,..............................................................."<< endl;
cout << "/////////////////*.........,,.......................................... ................."<< endl;
cout << "//////////////////..........,,,,,,.,....................................................."<< endl;
}

/*************************************/
/************** PRIVATE **************/
/*************************************/

void Thanos::read_quotesfile() {
    string quote;
    ifstream infile;
    infile.open(filename);

    if(infile.is_open()) {

        while(infile) {
            getline(infile, quote);
            if (quote.length() > 1) { punchlines.push_back(quote); }
        }
    } else {
        cout << "Error while opening " << filename << " (missing?)." << endl;
    }

    infile.close();
}

#endif
